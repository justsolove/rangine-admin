(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-86f40422","chunk-a7739924"],{"25c97":function(t,e,r){"use strict";r.d(e,"a",function(){return n}),r.d(e,"e",function(){return o}),r.d(e,"b",function(){return i}),r.d(e,"c",function(){return c}),r.d(e,"d",function(){return s}),r.d(e,"f",function(){return l});var a=r("b775");function n(t){return Object(a.a)({url:"/v1/topic",method:"post",params:{method:"add.topic.item"},data:t})}function o(t){return Object(a.a)({url:"/v1/topic",method:"post",params:{method:"set.topic.item"},data:t})}function i(t){return Object(a.a)({url:"/v1/topic",method:"post",params:{method:"del.topic.list"},data:{topic_id:t}})}function c(t){return Object(a.a)({url:"/v1/topic",method:"post",params:{method:"get.topic.item"},data:{topic_id:t}})}function s(t){return Object(a.a)({url:"/v1/topic",method:"post",params:{method:"get.topic.list"},data:t})}function l(t,e){return Object(a.a)({url:"/v1/topic",method:"post",params:{method:"set.topic.status"},data:{topic_id:t,status:e}})}},3113:function(t,e,r){"use strict";r.r(e);r("8e6e"),r("ac6a"),r("456d");var a=r("bd86"),n=r("2f62"),o=r("25c97");function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(r,!0).forEach(function(t){Object(a.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var s={components:{csTinymce:function(){return r.e("chunk-49c0dee6").then(r.bind(null,"4b93"))}},props:{state:{type:String,required:!0,default:"create"},formData:{type:Object,required:!1,default:function(){}},loading:{type:Boolean,required:!1,default:!1}},data:function(){return{dialogLoading:!1,stateMap:{create:"新增专题",update:"编辑专题"},stateButton:{create:"确定",update:"修改"},currentForm:{title:"",alias:"",content:"",keywords:"",description:"",status:"1"},rules:{title:[{required:!0,message:"标题不能为空",trigger:"blur"},{max:200,message:"长度不能大于 200 个字符",trigger:"blur"}],alias:[{max:100,message:"长度不能大于 100 个字符",trigger:"blur"}],keywords:[{max:255,message:"长度不能大于 255 个字符",trigger:"blur"}],description:[{max:255,message:"长度不能大于 255 个字符",trigger:"blur"}],content:[{required:!0,message:"内容不能为空",trigger:"blur"}]}}},watch:{formData:{handler:function(t){var e=this;"update"===this.state&&(this.currentForm=t,this.$refs.tinymce&&(this.$refs.tinymce.destroyTinymce(),this.$refs.tinymce.initTinymce(),this.$refs.tinymce.setContent(t.content)),this.$nextTick(function(){e.$refs.form.clearValidate()}))}}},methods:c({},Object(n.b)("careyshop/page",["close"]),{},Object(n.b)("careyshop/update",["updateData"]),{handleClose:function(){this.close({tagName:this.$route.fullPath})},handleConfirm:function(){var e=this;this.$refs.form.validate(function(t){t&&(e.dialogLoading=!0,"create"===e.state?e.handleCreate():e.handleUpdate())})},handleCreate:function(){var e=this;Object(o.a)(c({},this.currentForm)).then(function(t){e.updateData({type:"add",name:"system-article-topic",data:c({},t.data)}),e.$message.success("操作成功"),e.handleClose()}).finally(function(){e.dialogLoading=!1})},handleUpdate:function(){var e=this;Object(o.e)(c({},this.currentForm)).then(function(t){e.updateData({type:"set",name:"system-article-topic",srcId:t.data.topic_id,data:c({},t.data)}),e.$message.success("操作成功"),e.handleClose()}).finally(function(){e.dialogLoading=!1})}})},l=(r("6b73"),r("2877")),u=Object(l.a)(s,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"cs-p"},[r("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"box-card",attrs:{shadow:"never"}},[r("div",{staticClass:"clearfix",staticStyle:{"text-align":"center"},attrs:{slot:"header"},slot:"header"},[r("span",[e._v(e._s(e.stateMap[e.state]))])]),r("el-form",{ref:"form",attrs:{model:e.currentForm,rules:e.rules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"标题",prop:"title"}},[r("el-input",{attrs:{placeholder:"请输入专题标题",clearable:!0},model:{value:e.currentForm.title,callback:function(t){e.$set(e.currentForm,"title",t)},expression:"currentForm.title"}})],1),r("el-form-item",{attrs:{label:"别名",prop:"alias"}},[r("el-input",{attrs:{placeholder:"可输入专题别名",clearable:!0},model:{value:e.currentForm.alias,callback:function(t){e.$set(e.currentForm,"alias",t)},expression:"currentForm.alias"}})],1),r("el-form-item",{attrs:{label:"关键词",prop:"keywords"}},[r("el-input",{attrs:{placeholder:"可输入专题关键词",clearable:!0},model:{value:e.currentForm.keywords,callback:function(t){e.$set(e.currentForm,"keywords",t)},expression:"currentForm.keywords"}})],1),r("el-form-item",{attrs:{label:"描述",prop:"description"}},[r("el-input",{attrs:{placeholder:"可输入专题描述",type:"textarea",rows:3},model:{value:e.currentForm.description,callback:function(t){e.$set(e.currentForm,"description",t)},expression:"currentForm.description"}})],1),r("el-form-item",{attrs:{label:"内容",prop:"content"}},[r("cs-tinymce",{ref:"tinymce",attrs:{code:"inside_content"},model:{value:e.currentForm.content,callback:function(t){e.$set(e.currentForm,"content",t)},expression:"currentForm.content"}})],1),r("el-form-item",{attrs:{label:"状态",prop:"status"}},[r("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},model:{value:e.currentForm.status,callback:function(t){e.$set(e.currentForm,"status",t)},expression:"currentForm.status"}})],1),r("el-form-item",{attrs:{size:"small"}},[r("el-button",{attrs:{type:"primary",loading:e.dialogLoading},on:{click:e.handleConfirm}},[e._v(e._s(e.stateButton[e.state]))]),r("el-button",{on:{click:e.handleClose}},[e._v("取消")])],1)],1)],1)],1)},[],!1,null,"c7c10fe4",null);e.default=u.exports},"5f95":function(t,e,r){},"6b73":function(t,e,r){"use strict";var a=r("5f95");r.n(a).a}}]);