(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-64d1ffef"],{"2edc":function(e,t,i){"use strict";i.d(t,"a",function(){return o}),i.d(t,"h",function(){return s}),i.d(t,"c",function(){return n}),i.d(t,"d",function(){return a}),i.d(t,"e",function(){return l}),i.d(t,"g",function(){return c}),i.d(t,"f",function(){return u}),i.d(t,"b",function(){return m});var r=i("b775");function o(e){return Object(r.a)({url:"/v1/delivery_item",method:"post",params:{method:"add.delivery.company.item"},data:e})}function s(e){return Object(r.a)({url:"/v1/delivery_item",method:"post",params:{method:"set.delivery.company.item"},data:e})}function n(e){return Object(r.a)({url:"/v1/delivery_item",method:"post",params:{method:"del.delivery.company.list"},data:{delivery_item_id:e}})}function a(e){return Object(r.a)({url:"/v1/delivery_item",method:"post",params:{method:"get.delivery.company.item"},data:{delivery_item_id:e}})}function l(e){return Object(r.a)({url:"/v1/delivery_item",method:"post",params:{method:"get.delivery.company.list"},data:e})}function c(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return Object(r.a)({url:"/v1/delivery_item",method:"post",params:{method:"get.delivery.company.select"},data:{type:e}})}function u(e){return Object(r.a)({url:"/v1/delivery_item",method:"post",params:{method:"get.delivery.company.recognise"},data:{code:e}})}function m(e){return Object(r.a)({url:"/v1/delivery_item",method:"post",params:{method:"copy.delivery.company.hot"},data:{delivery_item_id:e}})}},"90c8":function(e,t,i){"use strict";i.r(t);i("8e6e"),i("456d"),i("7514"),i("55dd");var r=i("bd86"),u=(i("ac6a"),i("06e3")),o=i("2edc");function s(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}function m(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?s(i,!0).forEach(function(e){Object(r.a)(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}var n={props:{loading:{default:!1},tableData:{default:function(){return[]}}},data:function(){return{currentTableData:[],multipleSelection:[],auth:{add:!1,set:!1,del:!1,sort:!1,area:!1,enable:!1,disable:!1},statusMap:{0:{text:"禁用",type:"danger"},1:{text:"启用",type:"success"},2:{text:"...",type:"info"}},dialogLoading:!1,dialogFormVisible:!1,dialogStatus:"",dialogCompany:[],textMap:{update:"编辑方式",create:"新增方式"},form:{delivery_item_id:void 0,content:void 0,first_weight:void 0,first_weight_price:void 0,second_weight:void 0,second_weight_price:void 0,first_item:void 0,first_item_price:void 0,second_item:void 0,second_item_price:void 0,first_volume:void 0,first_volume_price:void 0,second_volume:void 0,second_volume_price:void 0,sort:void 0,status:void 0},rules:{delivery_item_id:[{required:!0,message:"至少选择一项",trigger:"change"}],content:[{max:150,message:"长度不能大于 150 个字符",trigger:"blur"}],first_weight:[{required:!0,message:"首重不能为空",trigger:"blur"},{type:"number",message:"必须为数字值",trigger:"blur"}],first_weight_price:[{required:!0,message:"首重运费不能为空",trigger:"blur"},{type:"number",message:"必须为数字值",trigger:"blur"}],second_weight:[{required:!0,message:"续重不能为空",trigger:"blur"},{type:"number",message:"必须为数字值",trigger:"blur"}],second_weight_price:[{required:!0,message:"续重运费不能为空",trigger:"blur"},{type:"number",message:"必须为数字值",trigger:"blur"}],first_item:[{required:!0,message:"首件不能为空",trigger:"blur"},{type:"number",message:"必须为数字值",trigger:"blur"}],first_item_price:[{required:!0,message:"首件运费不能为空",trigger:"blur"},{type:"number",message:"必须为数字值",trigger:"blur"}],second_item:[{required:!0,message:"续件不能为空",trigger:"blur"},{type:"number",message:"必须为数字值",trigger:"blur"}],second_item_price:[{required:!0,message:"续件运费不能为空",trigger:"blur"},{type:"number",message:"必须为数字值",trigger:"blur"}],first_volume:[{required:!0,message:"首体积量不能为空",trigger:"blur"},{type:"number",message:"必须为数字值",trigger:"blur"}],first_volume_price:[{required:!0,message:"首体积运费不能为空",trigger:"blur"},{type:"number",message:"必须为数字值",trigger:"blur"}],second_volume:[{required:!0,message:"续体积量不能为空",trigger:"blur"},{type:"number",message:"必须为数字值",trigger:"blur"}],second_volume_price:[{required:!0,message:"续体积运费不能为空",trigger:"blur"},{type:"number",message:"必须为数字值",trigger:"blur"}],sort:[{type:"number",message:"必须为数字值",trigger:"blur"}]}}},watch:{tableData:{handler:function(e){this.currentTableData=e},immediate:!0}},mounted:function(){this._validationAuth()},methods:{_validationAuth:function(){this.auth.add=this.$has("/setting/logistics/delivery/add"),this.auth.set=this.$has("/setting/logistics/delivery/set"),this.auth.del=this.$has("/setting/logistics/delivery/del"),this.auth.sort=this.$has("/setting/logistics/delivery/sort"),this.auth.area=this.$has("/setting/logistics/delivery/area"),this.auth.enable=this.$has("/setting/logistics/delivery/enable"),this.auth.disable=this.$has("/setting/logistics/delivery/disable")},_getIdList:function(e){null===e&&(e=this.multipleSelection);var t=[];return Array.isArray(e)?e.forEach(function(e){t.push(e.delivery_id)}):t.push(this.currentTableData[e].delivery_id),t},handleSelectionChange:function(e){this.multipleSelection=e},sortChange:function(e){var t=e.column,i=e.prop,r=e.order,o={order_type:void 0,order_field:void 0};t&&r&&(o.order_type="ascending"===r?"asc":"desc",o.order_field=i),this.$emit("sort",o)},handleStatus:function(e,t,i){var r=this,o=1<arguments.length&&void 0!==t?t:0,s=2<arguments.length&&void 0!==i&&i,n=this._getIdList(e);if(0!==n.length){if(!s){var a=this.currentTableData[e],l=a.status?0:1;if(1<a.status)return;if(0==l&&!this.auth.disable)return;if(1==l&&!this.auth.enable)return;return this.$set(this.currentTableData,e,m({},a,{status:2})),void c(n,l,this)}this.$confirm("确定要执行该操作吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",closeOnClickModal:!1}).then(function(){c(n,o,r)}).catch(function(){})}else this.$message.error("请选择要操作的数据");function c(i,r,o){Object(u.f)(i,r).then(function(){o.currentTableData.forEach(function(e,t){-1!==i.indexOf(e.delivery_id)&&o.$set(o.currentTableData,t,m({},e,{status:r}))}),o.$message.success("操作成功")})}},handleDelete:function(e){var t=this,i=this._getIdList(e);0!==i.length?this.$confirm("确定要执行该操作吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",closeOnClickModal:!1}).then(function(){Object(u.b)(i).then(function(){for(var e=t.currentTableData.length-1;0<=e;e--)-1!==i.indexOf(t.currentTableData[e].delivery_id)&&t.currentTableData.splice(e,1);t.$message.success("操作成功")})}).catch(function(){}):this.$message.error("请选择要操作的数据")},handleSort:function(e){Object(u.e)(this.currentTableData[e].delivery_id,this.currentTableData[e].sort)},handleCreate:function(){var e=this;this.form={delivery_item_id:void 0,content:void 0,first_weight:0,first_weight_price:0,second_weight:0,second_weight_price:0,first_item:0,first_item_price:0,second_item:0,second_item_price:0,first_volume:0,first_volume_price:0,second_volume:0,second_volume_price:0,sort:50,status:1},this.$nextTick(function(){e.$refs.form.clearValidate()}),this.dialogStatus="create",this.dialogLoading=!1,this.dialogFormVisible=!0},create:function(){var t=this;this.$refs.form.validate(function(e){e&&(t.dialogLoading=!0,Object(u.a)(m({},t.form)).then(function(e){t.currentTableData.unshift(m({},e.data,{get_delivery_item:m({},t.dialogCompany.find(function(e){return e.delivery_item_id===t.form.delivery_item_id}))})),t.dialogFormVisible=!1,t.$message.success("操作成功")}).catch(function(){t.dialogLoading=!1}))})},handleOpenSelect:function(){var t=this;this.dialogCompany.length||Object(o.g)(0).then(function(e){t.dialogCompany=e.data})},handleUpdate:function(e){var t=this;this.currentIndex=e,this.form=m({},this.currentTableData[e]),this.dialogCompany.length&&(this.dialogCompany.find(function(e){return e.delivery_item_id===t.form.delivery_item_id})||(this.form.delivery_item_id=void 0)),this.$nextTick(function(){t.$refs.form.clearValidate()}),this.dialogStatus="update",this.dialogLoading=!1,this.dialogFormVisible=!0},update:function(){var t=this;this.$refs.form.validate(function(e){e&&(t.dialogLoading=!0,Object(u.d)(m({},t.form)).then(function(e){t.$set(t.currentTableData,t.currentIndex,m({},t.currentTableData[t.currentIndex],{},e.data,{get_delivery_item:m({},t.dialogCompany.find(function(e){return e.delivery_item_id===t.form.delivery_item_id}))})),t.dialogFormVisible=!1,t.$message.success("操作成功")}).catch(function(){t.dialogLoading=!1}))})},handleArea:function(e){var t=this.currentTableData[e];this.$router.push({name:"setting-logistics-delivery-area",params:{delivery_id:t.delivery_id,delivery_item_id:t.delivery_item_id}})}}},a=(i("d836"),i("2877")),l=Object(a.a)(n,function(){var i=this,e=i.$createElement,r=i._self._c||e;return r("div",{staticClass:"cs-p"},[r("el-form",{attrs:{inline:!0,size:"small"}},[i.auth.add?r("el-form-item",[r("el-button",{attrs:{disabled:i.loading},on:{click:i.handleCreate}},[r("cs-icon",{attrs:{name:"plus"}}),i._v("\n        新增方式\n      ")],1)],1):i._e(),r("el-form-item",[r("el-button-group",[i.auth.enable?r("el-button",{attrs:{disabled:i.loading},on:{click:function(e){return i.handleStatus(null,1,!0)}}},[r("cs-icon",{attrs:{name:"check"}}),i._v("\n          启用\n        ")],1):i._e(),i.auth.disable?r("el-button",{attrs:{disabled:i.loading},on:{click:function(e){return i.handleStatus(null,0,!0)}}},[r("cs-icon",{attrs:{name:"close"}}),i._v("\n          禁用\n        ")],1):i._e()],1)],1),i.auth.del?r("el-form-item",[r("el-button",{attrs:{disabled:i.loading},on:{click:function(e){return i.handleDelete(null)}}},[r("cs-icon",{attrs:{name:"trash-o"}}),i._v("\n        删除\n      ")],1)],1):i._e(),r("cs-help",{staticStyle:{"padding-bottom":"19px"},attrs:{router:i.$route.path}})],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:i.loading,expression:"loading"}],attrs:{data:i.currentTableData,stripe:""},on:{"selection-change":i.handleSelectionChange,"sort-change":i.sortChange}},[r("el-table-column",{attrs:{type:"selection",width:"35"}}),r("el-table-column",{attrs:{type:"expand"},scopedSlots:i._u([{key:"default",fn:function(e){return[r("el-form",{staticClass:"table-expand",attrs:{"label-position":"left",inline:""}},[r("el-form-item",{attrs:{label:"名称"}},[r("span",[i._v(i._s(e.row.get_delivery_item.name))])]),r("el-form-item",{attrs:{label:"状态"}},[r("el-tag",{attrs:{type:i.statusMap[e.row.status].type,effect:"plain",size:"mini"}},[i._v("\n              "+i._s(i.statusMap[e.row.status].text)+"\n            ")])],1),r("el-form-item",{attrs:{label:"首重"}},[r("span",[i._v(i._s(e.row.first_weight))])]),r("el-form-item",{attrs:{label:"首重运费"}},[r("span",[i._v(i._s(e.row.first_weight_price))])]),r("el-form-item",{attrs:{label:"续重"}},[r("span",[i._v(i._s(e.row.second_weight))])]),r("el-form-item",{attrs:{label:"续重运费"}},[r("span",[i._v(i._s(e.row.second_weight_price))])]),r("el-form-item",{attrs:{label:"首件"}},[r("span",[i._v(i._s(e.row.first_item))])]),r("el-form-item",{attrs:{label:"首件运费"}},[r("span",[i._v(i._s(e.row.first_item_price))])]),r("el-form-item",{attrs:{label:"续件"}},[r("span",[i._v(i._s(e.row.second_item))])]),r("el-form-item",{attrs:{label:"续件运费"}},[r("span",[i._v(i._s(e.row.second_item_price))])]),r("el-form-item",{attrs:{label:"首体积量"}},[r("span",[i._v(i._s(e.row.first_volume))])]),r("el-form-item",{attrs:{label:"首体积运费"}},[r("span",[i._v(i._s(e.row.first_volume_price))])]),r("el-form-item",{attrs:{label:"续体积量"}},[r("span",[i._v(i._s(e.row.second_volume))])]),r("el-form-item",{attrs:{label:"续体积运费"}},[r("span",[i._v(i._s(e.row.second_volume_price))])])],1)]}}])}),r("el-table-column",{attrs:{label:"快递公司",prop:"get_delivery_item.name",sortable:"custom","min-width":"100"}}),r("el-table-column",{attrs:{label:"描述",prop:"content","min-width":"250"}}),r("el-table-column",{attrs:{label:"排序值",prop:"sort",align:"center",sortable:"custom"},scopedSlots:i._u([{key:"default",fn:function(t){return[i.auth.sort?r("el-input-number",{staticStyle:{width:"88px"},attrs:{size:"mini","controls-position":"right",min:0,max:255},on:{change:function(e){return i.handleSort(t.$index)}},model:{value:t.row.sort,callback:function(e){i.$set(t.row,"sort",e)},expression:"scope.row.sort"}}):r("span",[i._v("\n          "+i._s(t.row.sort)+"\n        ")])]}}])}),r("el-table-column",{attrs:{label:"状态",prop:"status",sortable:"custom",align:"center",width:"100"},scopedSlots:i._u([{key:"default",fn:function(t){return[r("el-tag",{style:i.auth.enable||i.auth.disable?"cursor: pointer;":"",attrs:{size:"mini",type:i.statusMap[t.row.status].type,effect:i.auth.enable||i.auth.disable?"light":"plain"},nativeOn:{click:function(e){return i.handleStatus(t.$index)}}},[i._v("\n          "+i._s(i.statusMap[t.row.status].text)+"\n        ")])]}}])}),r("el-table-column",{attrs:{label:"操作",align:"center","min-width":"140"},scopedSlots:i._u([{key:"default",fn:function(t){return[i.auth.set?r("el-button",{attrs:{size:"small",type:"text"},on:{click:function(e){return i.handleUpdate(t.$index)}}},[i._v("编辑")]):i._e(),i.auth.del?r("el-button",{attrs:{size:"small",type:"text"},on:{click:function(e){return i.handleDelete(t.$index)}}},[i._v("删除")]):i._e(),i.auth.area?r("el-button",{attrs:{size:"small",type:"text"},on:{click:function(e){return i.handleArea(t.$index)}}},[i._v("配送区域")]):i._e()]}}])})],1),r("el-dialog",{attrs:{title:i.textMap[i.dialogStatus],visible:i.dialogFormVisible,"append-to-body":!0,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(e){i.dialogFormVisible=e},open:i.handleOpenSelect}},[r("el-form",{ref:"form",attrs:{model:i.form,rules:i.rules,"label-width":"95px"}},[r("el-form-item",{attrs:{label:"快递公司",prop:"delivery_item_id"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:"",value:""},model:{value:i.form.delivery_item_id,callback:function(e){i.$set(i.form,"delivery_item_id",e)},expression:"form.delivery_item_id"}},i._l(i.dialogCompany,function(e){return r("el-option",{key:e.delivery_item_id,attrs:{label:e.name,value:e.delivery_item_id}})}),1),r("div",{staticClass:"help-block"},[i._v("只显示热门快递公司列表")])],1),r("el-form-item",{attrs:{label:"描述",prop:"content"}},[r("el-input",{attrs:{placeholder:"可输入配送方式描述",type:"textarea",rows:3},model:{value:i.form.content,callback:function(e){i.$set(i.form,"content",e)},expression:"form.content"}})],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"排序值",prop:"sort"}},[r("el-input-number",{staticStyle:{width:"120px"},attrs:{"controls-position":"right",min:0,max:255},model:{value:i.form.sort,callback:function(e){i.$set(i.form,"sort",e)},expression:"form.sort"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"状态",prop:"status"}},[r("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:i.form.status,callback:function(e){i.$set(i.form,"status",e)},expression:"form.status"}})],1)],1)],1),r("el-divider",[i._v("费用设置")]),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"首重",prop:"first_weight"}},[r("el-input-number",{attrs:{"controls-position":"right",precision:2,min:0},model:{value:i.form.first_weight,callback:function(e){i.$set(i.form,"first_weight",e)},expression:"form.first_weight"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"首重运费",prop:"first_weight_price"}},[r("el-input-number",{attrs:{"controls-position":"right",precision:2,min:0},model:{value:i.form.first_weight_price,callback:function(e){i.$set(i.form,"first_weight_price",e)},expression:"form.first_weight_price"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"续重",prop:"second_weight"}},[r("el-input-number",{attrs:{"controls-position":"right",precision:2,min:0},model:{value:i.form.second_weight,callback:function(e){i.$set(i.form,"second_weight",e)},expression:"form.second_weight"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"续重运费",prop:"second_weight_price"}},[r("el-input-number",{attrs:{"controls-position":"right",precision:2,min:0},model:{value:i.form.second_weight_price,callback:function(e){i.$set(i.form,"second_weight_price",e)},expression:"form.second_weight_price"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"首件",prop:"first_item"}},[r("el-input-number",{attrs:{"controls-position":"right",precision:2,min:0},model:{value:i.form.first_item,callback:function(e){i.$set(i.form,"first_item",e)},expression:"form.first_item"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"首件运费",prop:"first_item_price"}},[r("el-input-number",{attrs:{"controls-position":"right",precision:2,min:0},model:{value:i.form.first_item_price,callback:function(e){i.$set(i.form,"first_item_price",e)},expression:"form.first_item_price"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"续件",prop:"second_item"}},[r("el-input-number",{attrs:{"controls-position":"right",precision:2,min:0},model:{value:i.form.second_item,callback:function(e){i.$set(i.form,"second_item",e)},expression:"form.second_item"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"续件运费",prop:"second_item_price"}},[r("el-input-number",{attrs:{"controls-position":"right",precision:2,min:0},model:{value:i.form.second_item_price,callback:function(e){i.$set(i.form,"second_item_price",e)},expression:"form.second_item_price"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"首体积量",prop:"first_volume"}},[r("el-input-number",{attrs:{"controls-position":"right",precision:2,min:0},model:{value:i.form.first_volume,callback:function(e){i.$set(i.form,"first_volume",e)},expression:"form.first_volume"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"首体积运费",prop:"first_volume_price"}},[r("el-input-number",{attrs:{"controls-position":"right",precision:2,min:0},model:{value:i.form.first_volume_price,callback:function(e){i.$set(i.form,"first_volume_price",e)},expression:"form.first_volume_price"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"续体积量",prop:"second_volume"}},[r("el-input-number",{attrs:{"controls-position":"right",precision:2,min:0},model:{value:i.form.second_volume,callback:function(e){i.$set(i.form,"second_volume",e)},expression:"form.second_volume"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"续体积运费",prop:"second_volume_price"}},[r("el-input-number",{attrs:{"controls-position":"right",precision:2,min:0},model:{value:i.form.second_volume_price,callback:function(e){i.$set(i.form,"second_volume_price",e)},expression:"form.second_volume_price"}})],1)],1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:function(e){i.dialogFormVisible=!1}}},[i._v("取消")]),"create"===i.dialogStatus?r("el-button",{attrs:{type:"primary",loading:i.dialogLoading,size:"small"},on:{click:i.create}},[i._v("确定")]):r("el-button",{attrs:{type:"primary",loading:i.dialogLoading,size:"small"},on:{click:i.update}},[i._v("修改")])],1)],1)],1)},[],!1,null,"47d2d33e",null);t.default=l.exports},9131:function(e,t,i){},d836:function(e,t,i){"use strict";var r=i("9131");i.n(r).a}}]);