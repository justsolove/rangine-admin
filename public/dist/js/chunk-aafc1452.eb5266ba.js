(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-aafc1452"],{"3adf":function(e,n,t){"use strict";var i=t("8f63");t.n(i).a},"88bf":function(e,n,t){"use strict";t.r(n);t("7f7f"),t("7514");var i=t("f86b"),a=t("7633"),o={props:{value:{type:Array,required:!1,default:function(){return[]}},confirm:{type:Function}},data:function(){return{areaId:0,visible:!1,loading:!1,regionId:1,treeLoading:!1,treeProps:{label:"region_name",children:"children"}}},methods:{handleRegionDlg:function(e){this.areaId=e,this.loading=!1,this.visible=!0},handleClose:function(e){this.value.splice(this.value.indexOf(e),1)},loadNode:function(e,n){this.treeLoading=0===e.level,this.getRegionData(e.level?e.key:this.regionId,n)},getRegionData:function(e,t){var n=this;Object(i.c)({region_id:e}).then(function(e){var n=e.data.length?e.data:[];t(n)}).finally(function(){n.treeLoading=!1})},addRegion:function(n){var e=this.value.find(function(e){return e.region_id===n.region_id});e?this.$message.warning("".concat(e.name," 在所辖区域中已存在")):this.value.push({name:n.region_name,region_id:n.region_id})},update:function(){var n=this;this.loading=!0,Object(a.d)({delivery_area_id:this.areaId,region:this.value.map(function(e){return e.region_id})}).then(function(e){n.$emit("confirm",e.data.region),n.visible=!1}).finally(function(){n.loading=!1})}}},r=(t("3adf"),t("2877")),l=Object(r.a)(o,function(){var i=this,e=i.$createElement,a=i._self._c||e;return a("el-dialog",{attrs:{visible:i.visible,"append-to-body":!0,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(e){i.visible=e}}},[a("div",{staticStyle:{"margin-top":"-25px"}},[a("el-divider",[i._v("所辖区域")]),i._l(i.value,function(n){return a("el-tag",{key:n.region_id,staticClass:"region-tag",attrs:{"disable-transitions":!0,effect:"plain",type:"info",closable:""},on:{close:function(e){return i.handleClose(n)}}},[i._v("\n      "+i._s(n.name)+"\n    ")])}),i.value.length<=0?a("div",{staticClass:"not-region"},[a("span",[i._v("暂无区域")])]):i._e(),a("el-divider",[i._v("区域选择")]),i.visible?a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:i.treeLoading,expression:"treeLoading"}],staticClass:"tree-scroll",attrs:{"node-key":"region_id",props:i.treeProps,load:i.loadNode,lazy:!0},scopedSlots:i._u([{key:"default",fn:function(e){var n=e.node,t=e.data;return a("span",{staticClass:"custom-tree-node action"},[a("span",[i._v(i._s(n.label))]),a("span",{staticClass:"active"},[a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-plus"},on:{click:function(e){return e.stopPropagation(),i.addRegion(t)}}},[i._v("加入到所辖区域")])],1)])}}],null,!1,2355408561)}):i._e()],2),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){i.visible=!1}}},[i._v("取消")]),a("el-button",{attrs:{type:"primary",loading:i.loading,size:"small"},on:{click:i.update}},[i._v("确定")])],1)])},[],!1,null,"015e76c6",null);n.default=l.exports},"8f63":function(e,n,t){},f86b:function(e,n,t){"use strict";t.d(n,"a",function(){return a}),t.d(n,"f",function(){return o}),t.d(n,"b",function(){return r}),t.d(n,"c",function(){return l}),t.d(n,"d",function(){return s}),t.d(n,"e",function(){return d});var i=t("b775");function a(e){return Object(i.a)({url:"/admin/region/add",method:"post",params:{},data:e})}function o(e){return Object(i.a)({url:"/admin/region/set",method:"post",params:{},data:e})}function r(e){return Object(i.a)({url:"/admin/region/delete",method:"post",params:{},data:{region_id:e}})}function l(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return Object(i.a)({url:"/v1/region",method:"post",params:{method:"get.region.list"},data:e})}function s(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return Object(i.a)({url:"/admin/region/list",method:"post",params:{},data:e})}function d(e){return Object(i.a)({url:"/admin/region/index",method:"post",params:{},data:{region_id:e}})}}}]);