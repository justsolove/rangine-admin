(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-aafc1452"],{"3adf":function(e,t,n){"use strict";var i=n("8f63");n.n(i).a},"88bf":function(e,t,n){"use strict";n.r(t);n("7f7f"),n("7514");var i=n("f86b"),a=n("7633"),o={props:{value:{type:Array,required:!1,default:function(){return[]}},confirm:{type:Function}},data:function(){return{areaId:0,visible:!1,loading:!1,regionId:1,treeLoading:!1,treeProps:{label:"region_name",children:"children"}}},methods:{handleRegionDlg:function(e){this.areaId=e,this.loading=!1,this.visible=!0},handleClose:function(e){this.value.splice(this.value.indexOf(e),1)},loadNode:function(e,t){this.treeLoading=0===e.level,this.getRegionData(e.level?e.key:this.regionId,t)},getRegionData:function(e,n){var t=this;Object(i.c)({region_id:e}).then(function(e){var t=e.data.length?e.data:[];n(t)}).finally(function(){t.treeLoading=!1})},addRegion:function(t){var e=this.value.find(function(e){return e.region_id===t.region_id});e?this.$message.warning("".concat(e.name," 在所辖区域中已存在")):this.value.push({name:t.region_name,region_id:t.region_id})},update:function(){var t=this;this.loading=!0,Object(a.d)({delivery_area_id:this.areaId,region:this.value.map(function(e){return e.region_id})}).then(function(e){t.$emit("confirm",e.data.region),t.visible=!1}).finally(function(){t.loading=!1})}}},r=(n("3adf"),n("2877")),l=Object(r.a)(o,function(){var i=this,e=i.$createElement,a=i._self._c||e;return a("el-dialog",{attrs:{visible:i.visible,"append-to-body":!0,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(e){i.visible=e}}},[a("div",{staticStyle:{"margin-top":"-25px"}},[a("el-divider",[i._v("所辖区域")]),i._l(i.value,function(t){return a("el-tag",{key:t.region_id,staticClass:"region-tag",attrs:{"disable-transitions":!0,effect:"plain",type:"info",closable:""},on:{close:function(e){return i.handleClose(t)}}},[i._v("\n      "+i._s(t.name)+"\n    ")])}),i.value.length<=0?a("div",{staticClass:"not-region"},[a("span",[i._v("暂无区域")])]):i._e(),a("el-divider",[i._v("区域选择")]),i.visible?a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:i.treeLoading,expression:"treeLoading"}],staticClass:"tree-scroll",attrs:{"node-key":"region_id",props:i.treeProps,load:i.loadNode,lazy:!0},scopedSlots:i._u([{key:"default",fn:function(e){var t=e.node,n=e.data;return a("span",{staticClass:"custom-tree-node action"},[a("span",[i._v(i._s(t.label))]),a("span",{staticClass:"active"},[a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-plus"},on:{click:function(e){return e.stopPropagation(),i.addRegion(n)}}},[i._v("加入到所辖区域")])],1)])}}],null,!1,2355408561)}):i._e()],2),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){i.visible=!1}}},[i._v("取消")]),a("el-button",{attrs:{type:"primary",loading:i.loading,size:"small"},on:{click:i.update}},[i._v("确定")])],1)])},[],!1,null,"015e76c6",null);t.default=l.exports},"8f63":function(e,t,n){},f86b:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"f",function(){return o}),n.d(t,"b",function(){return r}),n.d(t,"c",function(){return l}),n.d(t,"d",function(){return s}),n.d(t,"e",function(){return d});var i=n("b775");function a(e){return Object(i.a)({url:"/v1/region",method:"post",params:{method:"add.region.item"},data:e})}function o(e){return Object(i.a)({url:"/v1/region",method:"post",params:{method:"set.region.item"},data:e})}function r(e){return Object(i.a)({url:"/v1/region",method:"post",params:{method:"del.region.list"},data:{region_id:e}})}function l(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return Object(i.a)({url:"/v1/region",method:"post",params:{method:"get.region.list"},data:e})}function s(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return Object(i.a)({url:"/v1/region",method:"post",params:{method:"get.region.son.list"},data:e})}function d(e){return Object(i.a)({url:"/v1/region",method:"post",params:{method:"set.region.index"},data:{region_id:e}})}}}]);